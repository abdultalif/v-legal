<?= $this->extend('layout/template'); ?><?= $this->section('content'); ?><div class="card card-outline card-lightblue">    <div class="card-header">        <div class="row">            <div class="col-md-4">                <select id="client_filter" class="form-control select2">                    <option value="">Tampilkan Semua</option>                    <?php foreach ($client as $row) : ?>                    <option                        value="<?=$row['client_id']?>">                        <?= $row['nama_client']; ?>                    </option>                    <?php endforeach; ?>                </select>            </div>            <div class="col-md text-right">                <button type="button" class="btn btn-tool" id="btn-refresh">                    <i class="fas fa-sync-alt"></i>                </button>                                <?php if(userdata('role') == 'superadmin') : ?>                <button class="btn btn-danger" onclick="return bulk_delete()">                    <i class="fa fa-trash fa-fw"></i> Hapus                </button>                                <?php endif; ?>            </div>        </div>    </div>    <div class="card-body p-0">        <?= form_open('lampiran/multidelete_lmk', ['id'=>'form-bulk']); ?>        <table id="lmk-data" class="table table-sm table-striped w-100">            <thead>                <tr>                    <th>Nama Klien</th>                    <th width="100">LMK Bulan</th>                    <th>Tgl.Upload</th>                    <th>Keterangan</th>                    <th width="25">Aksi</th>                    <th width="25">                        <input type="checkbox" id="select_all" class="text-center">                    </th>                </tr>            </thead>            <tbody></tbody>        </table>        <?= form_close(); ?>    </div></div><?= $this->endSection(); ?><?= $this->section('addons'); ?><script type="text/javascript">    $(function() {        if ($("#lmk-data").length > 0) {            var table = $("#lmk-data").DataTable({                "processing": true,                "serverSide": true,                "ajax": "<?=base_url('lampiran/json_lmk');?>",                buttons: ['copy', 'csv', 'print', 'excel'],                dom: "<'row px-2 px-md-4 pt-2'<'col-md'f><'col-md-6 text-right'B>>" +                    "<'row'<'col-md-12'tr>>" +                    "<'row px-2 px-md-4 py-3'<'col-md'i><'col-md-7'p>>",                lengthMenu: [                    [20],                    [20]                ],                responsive: true,                order: [                    [0, 'desc']                ],                type: 'GET',                columns: [                    {                        data: 'nama_client'                    },                    {                        data: 'tgl_lmk'                    },                    {                        data: 'tgl_lmk'                    },                    {                        data: 'ket_lmk'                    },                    {                        data: 'file_lmk'                    },                    {                        data: 'lmk_id'                    },                ],                columnDefs: [{                    targets: [-1],                    orderable: false,                    searchable: false                }, {                    "targets": 1,                    "seachable": true,                    "render": function(data, type, row, meta) {                        let bulan = [null, "Januari", "Februari", "Maret", "April", "Mei", "Juni", "Juli", "Agustus", "September", "Oktober", "November", "Desember"];                        return `${bulan[row.bulan_lmk]} ${row.tahun_lmk}`;                    }                }, {                    "targets": 4,                    "render": function(data, type, row, meta) {                        return `<a target="_blank" href="<?=base_url()?>/uploads/lmk/${data}" class="btn btn-xs btn-primary">                            <i class="fa fa-download"></i>                        </a>`;                    }                }, {                    "targets": 5,                    "render": function(data, type, row, meta) {                        return `<input name="checked[]" class="check" value="${data}" type="checkbox">`;                    }                }],                rowId: function(a) {                    return a;                }            });            table.buttons().container().appendTo('#dataTable_wrapper .col-md-5:eq(0)');            $('#btn-refresh').on('click', function(){                table.ajax.reload();            });        }        $('#lmk-data_wrapper #lmk-data_filter').addClass('text-left');        $('#select_all').on('click', function() {            if (this.checked) {                $('.check').each(function() {                    this.checked = true;                    $('#select_all').prop('checked', true);                });            } else {                $('.check').each(function() {                    this.checked = false;                    $('#select_all').prop('checked', false);                });            }        });        $('#client_filter').on('change', function() {            let id = $(this).val();            let ajaxUrl = "<?=base_url()?>/lampiran/json_lmk/" +                id;            $('#lmk-data').DataTable().ajax.url(ajaxUrl).load();        });    });    function bulk_delete() {        if ($('#lmk-data tbody tr .check:checked').length == 0) {            alert('Tidak ada data yang dipilih');        } else {            if (confirm('Confirm delete?')) {                $('#form-bulk').submit();            }        }    }</script><?= $this->endSection();